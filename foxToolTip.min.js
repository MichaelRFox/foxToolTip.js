!function(){function e(e){var t,o=this;e=e||window.event,"hidden"!==k.visibility&&(k.transition="",clearTimeout(W)),k.visibility="visible",r(e),t=L[O.indexOf(o.id)],w(t),t.autoSize()&&p(t),k.width=t.width()+"px",1==t.autoPosition()&&t.orientation(h(o,t),!0),c(o,t),k.opacity=t.backgroundOpacity()}function t(e){var t,o=this;t=L[O.indexOf(o.id)],0!=t.trackMouse()&&(e=e||window.event,r(e),1==t.autoPosition()&&t.orientation(h(o,t),!0),c(o,t))}function o(e){var t,o,n,i=this;e=e||window.event,t=L[O.indexOf(i.id)],o=t.transitionHidden(),k.transition=o,k["-moz-transition"]=o,k["-webkit-transiton"]=o,k["-o-transition"]=o,n=o.split(" ")[1].replace("s",""),W=window.setTimeout(function(){k.visibility="hidden"},1e3*n),k.opacity=0}function n(){O.forEach(function(e,t){null==document.getElementById(e)&&L[t].remove()})}function i(){b=document.documentElement.clientWidth||window.innerWidth||document.body.clientWidth,x=document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight,v=b/x}function r(e){"undefined"!=typeof d3?(E=d3.event.clientX,M=d3.event.clientX):(E=e.clientX,M=e.clientY)}function a(e){var t=15,o={},n=L[O.indexOf(e.id)];1==n.mousePoint()?(o.left=E-t,o.top=M-t,o.right=E+t,o.bottom=M+t):(o=e.getBoundingClientRect(),o.left-=t,o.top-=t,o.right+=t,o.bottom+=t);var i=o.bottom-o.top,r=o.right-o.left;return{top:o.top,left:o.left,height:i,width:r}}function d(e){e=e.toLowerCase();for(var t=0;t<T.length;t++)if(T[t].selectorText.toLowerCase()==e)return T[t]}function s(e){e=e.toLowerCase();for(var t=0;t<T.length;t++)if(T[t].selectorText.toLowerCase()==e)return t;return null}function u(e){var t=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}function f(e){var t;return z.style.color=e,t=getComputedStyle(z,null).color,t=-1!==t.indexOf("#")?u(t):t.match(/\d+/g),"rgb("+t[0]+","+t[1]+","+t[2]+")"}function l(e){return"number"==typeof e?e:(z.style.width=e,parseInt(window.getComputedStyle(z,null).getPropertyValue("width"),10))}function p(e){var t,o,n;t=S.offsetWidth+S.offsetHeight,S.style.width="",o=1/((v+1)/t),n=t-o,e.width(Math.max(e.minWidth(),Math.round(n)),!0)}function c(e,t){var o,n,i,r,d=a(e),s=function(e){var o=e,n=S.offsetHeight/2;return 0>e?(o=0,n=Math.max(t.arrowSize()+t.borderRadius(),e+S.offsetHeight/2)):e+S.offsetHeight>x&&(o=x-S.offsetHeight,n=Math.min(S.offsetHeight-t.borderRadius()-t.arrowSize(),S.offsetHeight/2+e-o)),{topAdjust:Math.round(o),arrowAdjust:Math.round(n)}},u=function(e){var o=e,n=S.offsetWidth/2;return 0>e?(o=0,n=Math.max(t.arrowSize()+t.borderRadius(),e+S.offsetWidth/2)):e+S.offsetWidth>b&&(o=b-S.offsetWidth,n=Math.min(S.offsetWidth-t.borderRadius()-t.arrowSize(),S.offsetWidth/2+e-o)),{leftAdjust:Math.round(o),arrowAdjust:Math.round(n)}};switch(t.orientation()){case"top":o=d.top-t.arrowSize()-S.offsetHeight,n=d.width/2+d.left-S.offsetWidth/2,r=u(n),k.top=Math.round(o)+"px",k.left=r.leftAdjust+"px",C.top="99.5%",C.left=r.arrowAdjust+"px",C.bottom="",C.right="",C.marginLeft=-t.arrowSize()+"px",C.marginTop="",C.borderColor=t.backgroundColor()+" transparent transparent transparent";break;case"bottom":o=d.top+d.height+t.arrowSize(),n=d.width/2+d.left-S.offsetWidth/2,r=u(n),k.top=Math.round(o)+"px",k.left=r.leftAdjust+"px",C.top="",C.left=r.arrowAdjust+"px",C.bottom="99.5%",C.right="",C.marginLeft=-t.arrowSize()+"px",C.marginTop="",C.borderColor="transparent transparent "+t.backgroundColor()+" transparent";break;case"left":o=d.height/2+d.top-S.offsetHeight/2,n=d.left-S.offsetWidth-t.arrowSize(),i=s(o),k.top=i.topAdjust+"px",k.left=Math.round(n)+"px",C.top=i.arrowAdjust+"px",C.left="99.5%",C.bottom="",C.right="",C.marginLeft="",C.marginTop=-t.arrowSize()+"px",C.borderColor="transparent transparent transparent "+t.backgroundColor();break;case"right":o=d.height/2+d.top-S.offsetHeight/2,n=d.left+d.width+t.arrowSize(),i=s(o),k.top=i.topAdjust+"px",k.left=Math.round(n)+"px",C.top=i.arrowAdjust+"px",C.left="",C.bottom="",C.right="99.5%",C.marginLeft="",C.marginTop=-t.arrowSize()+"px",C.borderColor="transparent "+t.backgroundColor()+" transparent transparent"}}function h(e,t){var o=a(e),n=o.left+o.width/2,i=o.top+o.height/2,r=n-S.offsetWidth/2,d=b-n-S.offsetWidth/2,s=i-S.offsetHeight/2,u=x-i-S.offsetHeight/2,f=o.left-t.arrowSize()-S.offsetWidth,l=b-S.offsetWidth-t.arrowSize()-o.left-o.width,p=o.top-t.arrowSize()-S.offsetHeight,c=x-S.offsetHeight-t.arrowSize()-o.top-o.height,h=Math.min(s,u,f),m=Math.min(s,u,l),g=Math.min(r,d,p),w=Math.min(r,d,c);switch(t.preferredOrientation()){case"left":if(h>=0)return"left";break;case"right":if(m>=0)return"right";break;case"top":if(g>=0)return"top";break;case"bottom":if(w>=0)return"bottom"}0>h&&0>m&&0>g&&0>w&&(h+=o.height,m+=o.height,g+=o.width,w+=o.width);var v=Math.max(h,m,g,w);switch(!0){case h==v:return"left";case m==v:return"right";case g==v:return"top";case w==v:return"bottom"}}function m(){if(1!=I){if(window.addEventListener?window.addEventListener("resize",i):window.attachEvent?window.attachEvent("onresize",i):window.onresize=i,i(),0==document.styleSheets.length){var e=document.getElementsByTagName("head")[0];y=document.createElement("style"),y.type="text/css",y.rel="stylesheet",y.media="screen",y.title="foxToolTip",y=e.appendChild(y)}y=document.styleSheets[0],T=y.cssRules?y.cssRules:y.rules,y.insertRule?(y.insertRule(".foxToolTip {opacity: 0;position: fixed;visibility: hidden;z-index: 1;pointer-events: none;display: inline-block;}",T.length),y.insertRule('.foxToolTip::after{content: "";position: absolute;border-style: solid;pointer-events: none;}',T.length),y.insertRule(".foxToolTipTarget {cursor: help;}",T.length)):(y.addRule(".foxToolTip","{opacity: 0;position: fixed;visibility: hidden;z-index: 1;pointer-events: none;display: inline-block;}",T.length),y.addRule(".foxToolTip::after",'{content: "";position: absolute;border-style: solid;pointer-events: none;}',T.length),y.addRule(".foxToolTipTarget","{cursor: help;}",T.length)),k=d(".foxToolTip").style,C=d(".foxToolTip::after").style,R=d(".foxToolTipTarget").style,S=document.createElement("div"),S.className="foxToolTip",document.body.insertBefore(S,document.body.firstChild),z=document.createElement("div"),z.style.visible="hidden",z.style.position="absolute",z.style.display="inline-block",document.body.insertBefore(z,document.body.firstChild),H=window.setInterval(n,P),I=!0}}function g(){window.removeEventListener?window.removeEventListener("resize",i):window.detachEvent?window.detachEvent("onresize",i):window.onresize="",y.deleteRule?(y.deleteRule(s(".foxToolTip")),y.deleteRule(s(".foxToolTip::after")),y.deleteRule(s(".foxToolTipTarget"))):(y.removeRule(s(".foxToolTip")),y.removeRule(s(".foxToolTip::after")),y.removeRule(s(".foxToolTipTarget"))),S.parentNode.removeChild(S),z.parentNode.removeChild(z),y=void 0,T=void 0,I=!1}function w(e){var t;k.fontFamily=e.font().family,k.fontSize=e.font().size+"px",k.color=e.foregroundColor(),k.backgroundColor=e.backgroundColor(),k.padding=e.padding(),k.borderRadius=e.borderRadius()+"px",C.borderWidth=e.arrowSize()+"px",R.cursor=e.cursor(),k.boxShadow=e.boxShadow(),k["-moz-boxShadow"]=e.boxShadow(),k["-webkit-boxShadow"]=e.boxShadow(),t=e.transitionVisible(),k.transition=t,k["-moz-transition"]=t,k["-webkit-transiton"]=t,k["-o-transition"]=t,k.width=e.minWidth()+"px",S.innerHTML=e.content()}var b,x,v,y,T,S,z,k,C,R,E,M,W,H,L=[],O=[],P=500,I=!1;return tip=function(i,r){var a,d=this,s={content:"",orientation:"",preferredOrientation:"right",autoPosition:!0,autoSize:!0,mousePoint:!1,trackMouse:!1,cursor:"help",fontFamily:"Tahoma",fontSize:"16",foregroundColor:"beige",backgroundColor:"midnightBlue",backgroundOpacity:1,padding:"5px 10px",borderRadius:12,boxShadow:"8px 8px 8px 0 rgba(0,0,0, 0.5)",transitionVisible:"opacity 0.4s 0s",transitionHidden:"opacity 0.4s 0s",arrowSize:12,width:"auto",minWidth:80};if(d.content=function(e){return"undefined"==typeof e?s.content:(s.content=e,d)},d.orientation=function(e,t){return"undefined"==typeof e?s.orientation:(t="undefined"==typeof t?!1:t,s.orientation=e,s.autoPosition=t,d)},d.preferredOrientation=function(e){return"undefined"==typeof e?s.preferredOrientation:(s.preferredOrientation=e,d)},d.autoPosition=function(e){return"undefined"==typeof e?s.autoPosition:(s.autoPosition=e,0==e&&""==s.position&&(s.position="right"),d)},d.autoSize=function(e){return"undefined"==typeof autosize?s.autoSize:(s.autoSize=e,d)},d.mousePoint=function(e){return"undefined"==typeof e?s.mousePoint:(s.mousePoint=e,d)},d.trackMouse=function(e){return"undefined"==typeof e?s.trackMouse:(s.trackMouse=e,s.mousePoint=e,d)},d.cursor=function(e){return"undefined"==typeof e?s.cursor:(s.cursor=e,d)},d.font=function(e,t){return 0==arguments.length?{family:s.fontFamily,size:s.fontSize}:(1==arguments.length&&(t="1em"),s.fontFamily=e,s.fontSize=l(t),d)},d.foregroundColor=function(e){return"undefined"==typeof e?s.foregroundColor:(s.foregroundColor=e,d)},d.backgroundColor=function(e){return"undefined"==typeof e?s.backgroundColor:(s.backgroundColor=e,d)},d.backgroundOpacity=function(e){return"undefined"==typeof e?s.backgroundOpacity:(s.backgroundOpacity=e,d)},d.padding=function(e){if("undefined"==typeof e)return s.padding;var t,o;switch(e=e.split(" ",4),e.length){case 0:return s.padding;case 1:t=l(e[0]),s.padding=t+"px "+t+"px "+t+"px "+t+"px";break;case 2:t=l(e[0]),o=l(e[1]),s.padding=t+"px "+o+"px "+t+"px "+o+"px";break;case 3:t=l(e[1]),s.padding=l(e[0])+"px "+t+"px "+l(e[2])+"px "+t+"px";break;case 4:s.padding=l(e[0])+"px "+l(e[1])+"px "+l(e[2])+"px "+l(e[3])+"px"}return d},d.borderRadius=function(e){return"undefined"==typeof e?s.borderRadius:(s.borderRadius=l(e),d)},d.boxShadow=function(e,t,o){if(0==arguments.length)return s.boxShadow;var n,i,r;return"none"==arguments[0]?s.boxShadow="":(i=l(e),n=f(t),0!==o?(rgbCore=n.match(/\d+/g),r="rgba("+parseInt(rgbCore[0])+","+parseInt(rgbCore[1])+","+parseInt(rgbCore[2])+","+o+")"):r=n,s.boxShadow=i+"px "+i+"px "+i+"px 0 "+r),d},d.transitionVisible=function(e,t){return 0==arguments.length?s.transitionVisible:(s.transitionVisible="opacity "+t+"s ease-in "+e+"s",d)},d.transitionHidden=function(e,t){return 0==arguments.length?s.transitionHidden:(s.transitionHidden="opacity "+t+"s ease-out "+e+"s",d)},d.arrowSize=function(e){return"undefined"==typeof e?s.arrowSize:(s.arrowSize=l(e),d)},d.width=function(e,t){return"undefined"==typeof e?s.width:(t="undefined"==typeof t?!1:!0,s.width=l(e),s.autoSize=t,d)},d.minWidth=function(e){return"undefined"==typeof e?s.minWidth:(s.minWidth=l(e),d)},d.remove=function(){window.clearInterval(H),"undefined"!=typeof d3?a.classed("foxToolTipTarget",!1).on("mouseover",null).on("mouseout",null).on("mousemove",null):(a.className=a.className.replace(" foxToolTipTarget",""),a.removeEventListener?(a.removeEventListener("mouseover",e),a.removeEventListener("mouseout",o),a.removeEventListener("mousemove",t)):(a.onmousemove=null,a.onmouseover=null,a.onmouseout=null));var r=O.indexOf(i);L.splice(r,1),O.splice(r,1),console.log(i+" removed"),0==L.length?g():H=window.setInterval(n,P)},"undefined"!=typeof d3?a=d3.select("#"+i).classed("foxToolTipTarget",!0).on("mouseover",e).on("mouseout",o).on("mousemove",t):(a=document.getElementById(i),a.className+=" foxToolTipTarget",a.addEventListener?(a.addEventListener("mouseover",e,!1),a.addEventListener("mouseout",o,!1),a.addEventListener("mousemove",t,!1)):(a.onmouseover=e,a.onmouseout=o,a.onmousemove=t)),"undefined"!=typeof d3){a[0].parentNode}else{a.parentNode}return s.content=r,d},foxToolTip={create:function(e,t){if(null!=document.getElementById(e)){I||m();var o;o=O.indexOf(e),-1!==o&&L[o].remove();var n=new tip(e,t);return L.push(n),O.push(e),L[L.length-1]}},remove:function(e){var t;t=O.indexOf(e),-1!==t&&L[t].remove()}},foxToolTip}();
