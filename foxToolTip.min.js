!function(){function e(e){var t,o=this;e=e||window.event,"hidden"!==k.visibility&&(k.transition="",clearTimeout(L)),k.visibility="visible",r(e),t=W[H.indexOf(o.id)],v(t),t.autoSize()&&p(t),k.width=t.width()+"px",1==t.autoPosition()&&t.orientation(h(o,t),!0),c(o,t),k.opacity=t.backgroundOpacity()}function t(e){var t,o=this;t=W[H.indexOf(o.id)],0!=t.trackMouse()&&(e=e||window.event,r(e),1==t.autoPosition()&&t.orientation(h(o,t),!0),c(o,t))}function o(e){var t,o,n,i=this;e=e||window.event,t=W[H.indexOf(i.id)],o=t.transitionHidden(),k.transition=o,k["-moz-transition"]=o,k["-webkit-transiton"]=o,k["-o-transition"]=o,n=o.split(" ")[1].replace("s",""),L=window.setTimeout(function(){k.visibility="hidden"},1e3*n),k.opacity=0}function n(e){e.forEach(function(e){var t;if("undefined"!=typeof d3)for(var o=0;o<e.removedNodes.length;o++)for(var n=0;n<e.removedNodes[o].childNodes.length;n++)t=H.indexOf(e.removedNodes[o].childNodes[n].id),-1!==t&&W[t].remove();else for(var o=0;o<e.removedNodes.length;o++)t=H.indexOf(e.removedNodes[o].id),-1!==t&&W[t].remove()})}function i(){w=document.documentElement.clientWidth||window.innerWidth||document.body.clientWidth,b=document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight,x=w/b}function r(e){"undefined"!=typeof d3?(R=d3.event.clientX,E=d3.event.clientX):(R=e.clientX,E=e.clientY)}function d(e){var t={},o=W[H.indexOf(e.id)];1==o.mousePoint()?(t.left=R-20,t.top=E-20,t.right=R+20,t.bottom=E+20):t=e.getBoundingClientRect();var n=t.bottom-t.top,i=t.right-t.left;return{top:t.top,left:t.left,height:n,width:i}}function a(e){e=e.toLowerCase();for(var t=0;t<T.length;t++)if(T[t].selectorText.toLowerCase()==e)return T[t]}function s(e){e=e.toLowerCase();for(var t=0;t<T.length;t++)if(T[t].selectorText.toLowerCase()==e)return t;return null}function u(e){var t=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}function f(e){var t;return S.style.color=e,t=getComputedStyle(S,null).color,t=-1!==t.indexOf("#")?u(t):t.match(/\d+/g),"rgb("+t[0]+","+t[1]+","+t[2]+")"}function l(e){return"number"==typeof e?e:(S.style.width=e,parseInt(window.getComputedStyle(S,null).getPropertyValue("width"),10))}function p(e){var t,o,n;t=z.offsetWidth+z.offsetHeight,z.style.width="",o=1/((x+1)/t),n=t-o,e.width(Math.max(e.minWidth(),Math.round(n)),!0)}function c(e,t){var o,n,i,r,a=d(e),s=function(e){var o=e,n=z.offsetHeight/2;return 0>e?(o=0,n=Math.max(t.arrowSize()+t.borderRadius(),e+z.offsetHeight/2)):e+z.offsetHeight>b&&(o=b-z.offsetHeight,n=Math.min(z.offsetHeight-t.borderRadius()-t.arrowSize(),z.offsetHeight/2+e-o)),{topAdjust:Math.round(o),arrowAdjust:Math.round(n)}},u=function(e){var o=e,n=z.offsetWidth/2;return 0>e?(o=0,n=Math.max(t.arrowSize()+t.borderRadius(),e+z.offsetWidth/2)):e+z.offsetWidth>w&&(o=w-z.offsetWidth,n=Math.min(z.offsetWidth-t.borderRadius()-t.arrowSize(),z.offsetWidth/2+e-o)),{leftAdjust:Math.round(o),arrowAdjust:Math.round(n)}};switch(t.orientation()){case"top":o=a.top-t.arrowSize()-z.offsetHeight,n=a.width/2+a.left-z.offsetWidth/2,r=u(n),k.top=Math.round(o)+"px",k.left=r.leftAdjust+"px",C.top="99.5%",C.left=r.arrowAdjust+"px",C.bottom="",C.right="",C.marginLeft=-t.arrowSize()+"px",C.marginTop="",C.borderColor=t.backgroundColor()+" transparent transparent transparent";break;case"bottom":o=a.top+a.height+t.arrowSize(),n=a.width/2+a.left-z.offsetWidth/2,r=u(n),k.top=Math.round(o)+"px",k.left=r.leftAdjust+"px",C.top="",C.left=r.arrowAdjust+"px",C.bottom="99.5%",C.right="",C.marginLeft=-t.arrowSize()+"px",C.marginTop="",C.borderColor="transparent transparent "+t.backgroundColor()+" transparent";break;case"left":o=a.height/2+a.top-z.offsetHeight/2,n=a.left-z.offsetWidth-t.arrowSize(),i=s(o),k.top=i.topAdjust+"px",k.left=Math.round(n)+"px",C.top=i.arrowAdjust+"px",C.left="99.5%",C.bottom="",C.right="",C.marginLeft="",C.marginTop=-t.arrowSize()+"px",C.borderColor="transparent transparent transparent "+t.backgroundColor();break;case"right":o=a.height/2+a.top-z.offsetHeight/2,n=a.left+a.width+t.arrowSize(),i=s(o),k.top=i.topAdjust+"px",k.left=Math.round(n)+"px",C.top=i.arrowAdjust+"px",C.left="",C.bottom="",C.right="99.5%",C.marginLeft="",C.marginTop=-t.arrowSize()+"px",C.borderColor="transparent "+t.backgroundColor()+" transparent transparent"}}function h(e,t){var o=d(e),n=o.left+o.width/2,i=o.top+o.height/2,r=n-z.offsetWidth/2,a=w-n-z.offsetWidth/2,s=i-z.offsetHeight/2,u=b-i-z.offsetHeight/2,f=o.left-t.arrowSize()-z.offsetWidth,l=w-z.offsetWidth-t.arrowSize()-o.left-o.width,p=o.top-t.arrowSize()-z.offsetHeight,c=b-z.offsetHeight-t.arrowSize()-o.top-o.height,h=Math.min(s,u,f),m=Math.min(s,u,l),g=Math.min(r,a,p),v=Math.min(r,a,c);switch(t.preferredOrientation()){case"left":if(h>=0)return"left";break;case"right":if(m>=0)return"right";break;case"top":if(g>=0)return"top";break;case"bottom":if(v>=0)return"bottom"}return 0>h&&0>m&&0>g&&0>v&&(h+=o.height,m+=o.height,g+=o.width,v+=o.width),h>=m&&h>=g&&h>=v?"left":m>=h&&m>=g&&m>=v?"right":g>=m&&g>=h&&g>=v?"top":"bottom"}function m(){if(1!=N){if(window.addEventListener?window.addEventListener("resize",i):window.attachEvent?window.attachEvent("onresize",i):window.onresize=i,i(),0==document.styleSheets.length){var e=document.getElementsByTagName("head")[0];y=document.createElement("style"),y.type="text/css",y.rel="stylesheet",y.media="screen",y.title="foxToolTip",y=e.appendChild(y)}y=document.styleSheets[0],T=y.cssRules?y.cssRules:y.rules,y.insertRule?(y.insertRule(".foxToolTip {opacity: 0;position: fixed;visibility: hidden;z-index: 1;pointer-events: none;display: inline-block;}",T.length),y.insertRule('.foxToolTip::after{content: "";position: absolute;border-style: solid;pointer-events: none;}',T.length),y.insertRule(".foxToolTipTarget {cursor: help;}",T.length)):(y.addRule(".foxToolTip","{opacity: 0;position: absolute;visibility: hidden;z-index: 1;pointer-events: none;display: inline-block;}",T.length),y.addRule(".foxToolTip::after",'{content: "";position: absolute;border-style: solid;pointer-events: none;}',T.length),y.addRule(".foxToolTipTarget","{cursor: help;}",T.length)),k=a(".foxToolTip").style,C=a(".foxToolTip::after").style,M=a(".foxToolTipTarget").style,z=document.createElement("div"),z.className="foxToolTip",document.body.insertBefore(z,document.body.firstChild),S=document.createElement("div"),S.style.visible="hidden",S.style.position="absolute",S.style.display="inline-block",document.body.insertBefore(S,document.body.firstChild),O=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,N=!0}}function g(){window.removeEventListener?window.removeEventListener("resize",i):window.detachEvent?window.detachEvent("onresize",i):window.onresize="",y.deleteRule?(y.deleteRule(s(".foxToolTip")),y.deleteRule(s(".foxToolTip::after")),y.deleteRule(s(".foxToolTipTarget"))):(y.removeRule(s(".foxToolTip")),y.removeRule(s(".foxToolTip::after")),y.removeRule(s(".foxToolTipTarget"))),z.parentNode.removeChild(z),S.parentNode.removeChild(S),y=void 0,T=void 0,N=!1}function v(e){var t;k.fontFamily=e.font().family,k.fontSize=e.font().size+"px",k.color=e.foregroundColor(),k.backgroundColor=e.backgroundColor(),k.padding=e.padding(),k.borderRadius=e.borderRadius()+"px",C.borderWidth=e.arrowSize()+"px",M.cursor=e.cursor(),k.boxShadow=e.boxShadow(),k["-moz-boxShadow"]=e.boxShadow(),k["-webkit-boxShadow"]=e.boxShadow(),t=e.transitionVisible(),k.transition=t,k["-moz-transition"]=t,k["-webkit-transiton"]=t,k["-o-transition"]=t,k.width=e.minWidth()+"px",z.innerHTML=e.content()}var w,b,x,y,T,z,S,k,C,M,R,E,L,O,W=[],H=[],N=!1;return tip=function(i,r){var d,a,s=this,u={content:"",orientation:"",preferredOrientation:"right",autoPosition:!0,autoSize:!0,mousePoint:!1,trackMouse:!1,cursor:"help",fontFamily:"Tahoma",fontSize:"16",foregroundColor:"beige",backgroundColor:"midnightBlue",backgroundOpacity:1,padding:"5px 10px",borderRadius:12,boxShadow:"8px 8px 8px 0 rgba(0,0,0, 0.5)",transitionVisible:"opacity 0.4s 0s",transitionHidden:"opacity 0.4s 0s",arrowSize:12,width:"auto",minWidth:80};if(s.content=function(e){return"undefined"==typeof e?u.content:(u.content=e,s)},s.orientation=function(e,t){return"undefined"==typeof e?u.orientation:(t="undefined"==typeof t?!1:t,u.orientation=e,u.autoPosition=t,s)},s.preferredOrientation=function(e){return"undefined"==typeof e?u.preferredOrientation:(u.preferredOrientation=e,s)},s.autoPosition=function(e){return"undefined"==typeof e?u.autoPosition:(u.autoPosition=e,0==e&&""==u.position&&(u.position="right"),s)},s.autoSize=function(e){return"undefined"==typeof autosize?u.autoSize:(u.autoSize=e,s)},s.mousePoint=function(e){return"undefined"==typeof e?u.mousePoint:(u.mousePoint=e,s)},s.trackMouse=function(e){return"undefined"==typeof e?u.trackMouse:(u.trackMouse=e,u.mousePoint=e,s)},s.cursor=function(e){return"undefined"==typeof e?u.cursor:(u.cursor=e,s)},s.font=function(e,t){return 0==arguments.length?{family:u.fontFamily,size:u.fontSize}:(1==arguments.length&&(t="1em"),u.fontFamily=e,u.fontSize=l(t),s)},s.foregroundColor=function(e){return"undefined"==typeof e?u.foregroundColor:(u.foregroundColor=e,s)},s.backgroundColor=function(e){return"undefined"==typeof e?u.backgroundColor:(u.backgroundColor=e,s)},s.backgroundOpacity=function(e){return"undefined"==typeof e?u.backgroundOpacity:(u.backgroundOpacity=e,s)},s.padding=function(e){if("undefined"==typeof e)return u.padding;var t,o;switch(e=e.split(" ",4),e.length){case 0:return u.padding;case 1:t=l(e[0]),u.padding=t+"px "+t+"px "+t+"px "+t+"px";break;case 2:t=l(e[0]),o=l(e[1]),u.padding=t+"px "+o+"px "+t+"px "+o+"px";break;case 3:t=l(e[1]),u.padding=l(e[0])+"px "+t+"px "+l(e[2])+"px "+t+"px";break;case 4:u.padding=l(e[0])+"px "+l(e[1])+"px "+l(e[2])+"px "+l(e[3])+"px"}return s},s.borderRadius=function(e){return"undefined"==typeof e?u.borderRadius:(u.borderRadius=l(e),s)},s.boxShadow=function(e,t,o){if(0==arguments.length)return u.boxShadow;var n,i,r;return"none"==arguments[0]?u.boxShadow="":(i=l(e),n=f(t),0!==o?(rgbCore=n.match(/\d+/g),r="rgba("+parseInt(rgbCore[0])+","+parseInt(rgbCore[1])+","+parseInt(rgbCore[2])+","+o+")"):r=n,u.boxShadow=i+"px "+i+"px "+i+"px 0 "+r),s},s.transitionVisible=function(e,t){return 0==arguments.length?u.transitionVisible:(u.transitionVisible="opacity "+t+"s ease-in "+e+"s",s)},s.transitionHidden=function(e,t){return 0==arguments.length?u.transitionHidden:(u.transitionHidden="opacity "+t+"s ease-out "+e+"s",s)},s.arrowSize=function(e){return"undefined"==typeof e?u.arrowSize:(u.arrowSize=l(e),s)},s.width=function(e,t){return"undefined"==typeof e?u.width:(t="undefined"!=typeof t,u.width=l(e),u.autoSize=t,s)},s.minWidth=function(e){return"undefined"==typeof e?u.minWidth:(u.minWidth=l(e),s)},s.remove=function(){"undefined"!=typeof d3?d.classed("foxToolTipTarget",!1).on("mouseover",null).on("mouseout",null).on("mousemove",null):(d.className=d.className.replace(" foxToolTipTarget",""),d.removeEventListener?(d.removeEventListener("mouseover",e),d.removeEventListener("mouseout",o),d.removeEventListener("mousemove",t)):(d.onmousemove=null,d.onmouseover=null,d.onmouseout=null)),"undefined"!=typeof O?a.disconnect:d.removeEventListener?d.removeEventListener("DOMNodeRemoved",targetRemoved):d.onDOMNodeRemoved=null;var n=H.indexOf(i);W.splice(n,1),H.splice(n,1),0==W.length&&g()},"undefined"!=typeof d3?d=d3.select("#"+i).classed("foxToolTipTarget",!0).on("mouseover",e).on("mouseout",o).on("mousemove",t):(d=document.getElementById(i),d.className+=" foxToolTipTarget",d.addEventListener?(d.addEventListener("mouseover",e,!1),d.addEventListener("mouseout",o,!1),d.addEventListener("mousemove",t,!1)):(d.onmouseover=e,d.onmouseout=o,d.onmousemove=t)),"undefined"!=typeof d3)var p=d[0].parentNode,c={childList:!0,subtree:!0};else var p=d.parentNode,c={childList:!0,subtree:!1};return"undefined"!=typeof O&&(a=new O(n),a.observe(p,c)),u.content=r,s},foxToolTip={create:function(e,t){var o;if(null!=document.getElementById(e)){if(o=H.indexOf(e),-1==o){N||m();var n=new tip(e,t);return W.push(n),H.push(e),W[W.length-1]}return W[o]}},remove:function(e){var t;t=H.indexOf(e),-1!==t&&W[t].remove()}},foxToolTip}();
