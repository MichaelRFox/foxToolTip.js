!function(){function mouseOver(event){var target,targetElement=this;event=event||window.event,"hidden"!==beforeRule.visibility&&(beforeRule.transition="",clearTimeout(timer)),beforeRule.visibility="visible",getMouseCoordinates(event),target=tips[tipsIndex.indexOf(targetElement.id)],applyOptions(target),target.autoSize()&&sizeTip(target),beforeRule.width=target.width()+"px",1==target.autoPosition()&&target.orientation(optimumOrientation(targetElement,target),!0),orient(targetElement,target),beforeRule.opacity=target.backgroundOpacity()}function mouseMove(event){var target,targetElement=this;target=tips[tipsIndex.indexOf(targetElement.id)],0!=target.trackMouse()&&(event=event||window.event,getMouseCoordinates(event),1==target.autoPosition()&&target.orientation(optimumOrientation(targetElement,target),!0),orient(targetElement,target))}function mouseOut(event){var target,transitionString,transitionDuration,targetElement=this;event=event||window.event,target=tips[tipsIndex.indexOf(targetElement.id)],transitionString=target.transitionHidden(),beforeRule.transition=transitionString,beforeRule["-moz-transition"]=transitionString,beforeRule["-webkit-transiton"]=transitionString,beforeRule["-o-transition"]=transitionString,transitionDuration=transitionString.split(" ")[1].replace("s",""),timer=window.setTimeout(function(){beforeRule.visibility="hidden"},1e3*transitionDuration),beforeRule.opacity=0}function detectTargetRemoval(){tipsIndex.forEach(function(tip,i){null==document.getElementById(tip)&&tips[i].remove()})}function windowResized(){windowWidth=document.documentElement.clientWidth||window.innerWidth||document.body.clientWidth,windowHeight=document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight,aspectRatio=windowWidth/windowHeight}function getMouseCoordinates(event){"undefined"!=typeof d3?(mouseX=d3.event.clientX,mouseY=d3.event.clientX):(mouseX=event.clientX,mouseY=event.clientY)}function getElementCoordinates(element){var cursorBuffer=15,clientRect={},target=tips[tipsIndex.indexOf(element.id)];1==target.mousePoint()?(clientRect.left=mouseX-cursorBuffer,clientRect.top=mouseY-cursorBuffer,clientRect.right=mouseX+cursorBuffer,clientRect.bottom=mouseY+cursorBuffer):(clientRect=element.getBoundingClientRect(),clientRect.left-=cursorBuffer,clientRect.top-=cursorBuffer,clientRect.right+=cursorBuffer,clientRect.bottom+=cursorBuffer);var height=clientRect.bottom-clientRect.top,width=clientRect.right-clientRect.left;return{top:clientRect.top,left:clientRect.left,height:height,width:width}}function getRule(rule){rule=rule.toLowerCase();for(var i=0;i<rules.length;i++)if(rules[i].selectorText.toLowerCase()==rule)return rules[i]}function getRuleIndex(rule){rule=rule.toLowerCase();for(var i=0;i<rules.length;i++)if(rules[i].selectorText.toLowerCase()==rule)return i;return null}function hexToRgb(hex){var rgb=hex.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);return[parseInt(rgb[1],16),parseInt(rgb[2],16),parseInt(rgb[3],16)]}function parseColor(input){var rgb;return pseudoDiv.style.color=input,rgb=getComputedStyle(pseudoDiv,null).color,rgb=rgb.indexOf("#")!==-1?hexToRgb(rgb):rgb.match(/\d+/g),"rgb("+rgb[0]+","+rgb[1]+","+rgb[2]+")"}function parseSize(size){return"number"==typeof size?size:(pseudoDiv.style.width=size,parseInt(window.getComputedStyle(pseudoDiv,null).getPropertyValue("width"),10))}function sizeTip(target){var p,h,w;p=ttDiv.offsetWidth+ttDiv.offsetHeight,ttDiv.style.width="",h=1/((aspectRatio+1)/p),w=p-h,target.width(Math.max(target.minWidth(),Math.round(w)),!0)}function orient(targetElement,target){var top,left,verticalAdjust,horizontalAdjust,targetCoordinates=getElementCoordinates(targetElement),adjustVertical=function(top){var topAdjust=top,arrowAdjust=ttDiv.offsetHeight/2;return top<0?(topAdjust=0,arrowAdjust=Math.max(target.arrowSize()+target.borderRadius(),top+ttDiv.offsetHeight/2)):top+ttDiv.offsetHeight>windowHeight&&(topAdjust=windowHeight-ttDiv.offsetHeight,arrowAdjust=Math.min(ttDiv.offsetHeight-target.borderRadius()-target.arrowSize(),ttDiv.offsetHeight/2+top-topAdjust)),{topAdjust:Math.round(topAdjust),arrowAdjust:Math.round(arrowAdjust)}},adjustHorizontal=function(left){var leftAdjust=left,arrowAdjust=ttDiv.offsetWidth/2;return left<0?(leftAdjust=0,arrowAdjust=Math.max(target.arrowSize()+target.borderRadius(),left+ttDiv.offsetWidth/2)):left+ttDiv.offsetWidth>windowWidth&&(leftAdjust=windowWidth-ttDiv.offsetWidth,arrowAdjust=Math.min(ttDiv.offsetWidth-target.borderRadius()-target.arrowSize(),ttDiv.offsetWidth/2+left-leftAdjust)),{leftAdjust:Math.round(leftAdjust),arrowAdjust:Math.round(arrowAdjust)}};switch(target.orientation()){case"top":top=targetCoordinates.top-target.arrowSize()-ttDiv.offsetHeight,left=targetCoordinates.width/2+targetCoordinates.left-ttDiv.offsetWidth/2,horizontalAdjust=adjustHorizontal(left),beforeRule.top=Math.round(top)+"px",beforeRule.left=horizontalAdjust.leftAdjust+"px",afterRule.top="99.5%",afterRule.left=horizontalAdjust.arrowAdjust+"px",afterRule.bottom="",afterRule.right="",afterRule.marginLeft=-target.arrowSize()+"px",afterRule.marginTop="",afterRule.borderColor=target.backgroundColor()+" transparent transparent transparent";break;case"bottom":top=targetCoordinates.top+targetCoordinates.height+target.arrowSize(),left=targetCoordinates.width/2+targetCoordinates.left-ttDiv.offsetWidth/2,horizontalAdjust=adjustHorizontal(left),beforeRule.top=Math.round(top)+"px",beforeRule.left=horizontalAdjust.leftAdjust+"px",afterRule.top="",afterRule.left=horizontalAdjust.arrowAdjust+"px",afterRule.bottom="99.5%",afterRule.right="",afterRule.marginLeft=-target.arrowSize()+"px",afterRule.marginTop="",afterRule.borderColor="transparent transparent "+target.backgroundColor()+" transparent";break;case"left":top=targetCoordinates.height/2+targetCoordinates.top-ttDiv.offsetHeight/2,left=targetCoordinates.left-ttDiv.offsetWidth-target.arrowSize(),verticalAdjust=adjustVertical(top),beforeRule.top=verticalAdjust.topAdjust+"px",beforeRule.left=Math.round(left)+"px",afterRule.top=verticalAdjust.arrowAdjust+"px",afterRule.left="99.5%",afterRule.bottom="",afterRule.right="",afterRule.marginLeft="",afterRule.marginTop=-target.arrowSize()+"px",afterRule.borderColor="transparent transparent transparent "+target.backgroundColor();break;case"right":top=targetCoordinates.height/2+targetCoordinates.top-ttDiv.offsetHeight/2,left=targetCoordinates.left+targetCoordinates.width+target.arrowSize(),verticalAdjust=adjustVertical(top),beforeRule.top=verticalAdjust.topAdjust+"px",beforeRule.left=Math.round(left)+"px",afterRule.top=verticalAdjust.arrowAdjust+"px",afterRule.left="",afterRule.bottom="",afterRule.right="99.5%",afterRule.marginLeft="",afterRule.marginTop=-target.arrowSize()+"px",afterRule.borderColor="transparent "+target.backgroundColor()+" transparent transparent"}}function optimumOrientation(targetElement,target){var elementCoordinates=getElementCoordinates(targetElement),elementCenterH=elementCoordinates.left+elementCoordinates.width/2,elementCenterV=elementCoordinates.top+elementCoordinates.height/2,leftSpacing=elementCenterH-ttDiv.offsetWidth/2,rightSpacing=windowWidth-elementCenterH-ttDiv.offsetWidth/2,topSpacing=elementCenterV-ttDiv.offsetHeight/2,bottomSpacing=windowHeight-elementCenterV-ttDiv.offsetHeight/2,leftMargin=elementCoordinates.left-target.arrowSize()-ttDiv.offsetWidth,rightMargin=windowWidth-ttDiv.offsetWidth-target.arrowSize()-elementCoordinates.left-elementCoordinates.width,topMargin=elementCoordinates.top-target.arrowSize()-ttDiv.offsetHeight,bottomMargin=windowHeight-ttDiv.offsetHeight-target.arrowSize()-elementCoordinates.top-elementCoordinates.height,leftValue=Math.min(topSpacing,bottomSpacing,leftMargin),rightValue=Math.min(topSpacing,bottomSpacing,rightMargin),topValue=Math.min(leftSpacing,rightSpacing,topMargin),bottomValue=Math.min(leftSpacing,rightSpacing,bottomMargin);switch(target.preferredOrientation()){case"left":if(leftValue>=0)return"left";break;case"right":if(rightValue>=0)return"right";break;case"top":if(topValue>=0)return"top";break;case"bottom":if(bottomValue>=0)return"bottom"}leftValue<0&&rightValue<0&&topValue<0&&bottomValue<0&&(leftValue+=elementCoordinates.height,rightValue+=elementCoordinates.height,topValue+=elementCoordinates.width,bottomValue+=elementCoordinates.width);var maxValue=Math.max(leftValue,rightValue,topValue,bottomValue);switch(!0){case leftValue==maxValue:return"left";case rightValue==maxValue:return"right";case topValue==maxValue:return"top";case bottomValue==maxValue:return"bottom"}}function setUp(){if(1!=set){if(window.addEventListener?window.addEventListener("resize",windowResized):window.attachEvent?window.attachEvent("onresize",windowResized):window.onresize=windowResized,windowResized(),0==document.styleSheets.length){var head=document.getElementsByTagName("head")[0];sheet=document.createElement("style"),sheet.type="text/css",sheet.rel="stylesheet",sheet.media="screen",sheet.title="foxToolTip",sheet=head.appendChild(sheet)}sheet=document.styleSheets[0],rules=sheet.cssRules?sheet.cssRules:sheet.rules,sheet.insertRule?(sheet.insertRule(".foxToolTip {opacity: 0;position: fixed;visibility: hidden;z-index: 1;pointer-events: none;display: inline-block;}",rules.length),sheet.insertRule('.foxToolTip::after{content: "";position: absolute;border-style: solid;pointer-events: none;}',rules.length),sheet.insertRule(".foxToolTipTarget {cursor: help;}",rules.length)):(sheet.addRule(".foxToolTip","{opacity: 0;position: fixed;visibility: hidden;z-index: 1;pointer-events: none;display: inline-block;}",rules.length),sheet.addRule(".foxToolTip::after",'{content: "";position: absolute;border-style: solid;pointer-events: none;}',rules.length),sheet.addRule(".foxToolTipTarget","{cursor: help;}",rules.length)),beforeRule=getRule(".foxToolTip").style,afterRule=getRule(".foxToolTip::after").style,targetRule=getRule(".foxToolTipTarget").style,ttDiv=document.createElement("div"),ttDiv.className="foxToolTip",document.body.insertBefore(ttDiv,document.body.firstChild),pseudoDiv=document.createElement("div"),pseudoDiv.style.visible="hidden",pseudoDiv.style.position="absolute",pseudoDiv.style.display="inline-block",document.body.insertBefore(pseudoDiv,document.body.firstChild),targetTimer=window.setInterval(detectTargetRemoval,targetTimerInterval),set=!0}}function closeDown(){window.removeEventListener?window.removeEventListener("resize",windowResized):window.detachEvent?window.detachEvent("onresize",windowResized):window.onresize="",sheet.deleteRule?(sheet.deleteRule(getRuleIndex(".foxToolTip")),sheet.deleteRule(getRuleIndex(".foxToolTip::after")),sheet.deleteRule(getRuleIndex(".foxToolTipTarget"))):(sheet.removeRule(getRuleIndex(".foxToolTip")),sheet.removeRule(getRuleIndex(".foxToolTip::after")),sheet.removeRule(getRuleIndex(".foxToolTipTarget"))),ttDiv.parentNode.removeChild(ttDiv),pseudoDiv.parentNode.removeChild(pseudoDiv),sheet=void 0,rules=void 0,set=!1}function applyOptions(target){var transitionString;beforeRule.fontFamily=target.font().family,beforeRule.fontSize=target.font().size+"px",beforeRule.color=target.foregroundColor(),beforeRule.backgroundColor=target.backgroundColor(),beforeRule.padding=target.padding(),beforeRule.borderRadius=target.borderRadius()+"px",afterRule.borderWidth=target.arrowSize()+"px",targetRule.cursor=target.cursor(),beforeRule.boxShadow=target.boxShadow(),beforeRule["-moz-boxShadow"]=target.boxShadow(),beforeRule["-webkit-boxShadow"]=target.boxShadow(),transitionString=target.transitionVisible(),beforeRule.transition=transitionString,beforeRule["-moz-transition"]=transitionString,beforeRule["-webkit-transiton"]=transitionString,beforeRule["-o-transition"]=transitionString,beforeRule.width=target.minWidth()+"px",ttDiv.innerHTML=target.content()}var windowWidth,windowHeight,aspectRatio,sheet,rules,ttDiv,pseudoDiv,beforeRule,afterRule,targetRule,mouseX,mouseY,timer,targetTimer,tips=[],tipsIndex=[],targetTimerInterval=500,set=!1;return tip=function(elementId,content){var targetElement,thisToolTip=this,options={content:"",orientation:"",preferredOrientation:"right",autoPosition:!0,autoSize:!0,mousePoint:!1,trackMouse:!1,cursor:"help",fontFamily:"Tahoma",fontSize:"16",foregroundColor:"beige",backgroundColor:"midnightBlue",backgroundOpacity:1,padding:"5px 10px",borderRadius:12,boxShadow:"8px 8px 8px 0 rgba(0,0,0, 0.5)",transitionVisible:"opacity 0.4s 0s",transitionHidden:"opacity 0.4s 0s",arrowSize:12,width:"auto",minWidth:80};if(thisToolTip.content=function(content){return"undefined"==typeof content?options.content:(options.content=content,thisToolTip)},thisToolTip.orientation=function(orientation,autoPosition){return"undefined"==typeof orientation?options.orientation:(autoPosition="undefined"!=typeof autoPosition&&autoPosition,options.orientation=orientation,options.autoPosition=autoPosition,thisToolTip)},thisToolTip.preferredOrientation=function(preferredOrientation){return"undefined"==typeof preferredOrientation?options.preferredOrientation:(options.preferredOrientation=preferredOrientation,thisToolTip)},thisToolTip.autoPosition=function(autoPosition){return"undefined"==typeof autoPosition?options.autoPosition:(options.autoPosition=autoPosition,0==autoPosition&&""==options.position&&(options.position="right"),thisToolTip)},thisToolTip.autoSize=function(autoSize){return"undefined"==typeof autosize?options.autoSize:(options.autoSize=autoSize,thisToolTip)},thisToolTip.mousePoint=function(mousePoint){return"undefined"==typeof mousePoint?options.mousePoint:(options.mousePoint=mousePoint,thisToolTip)},thisToolTip.trackMouse=function(trackMouse){return"undefined"==typeof trackMouse?options.trackMouse:(options.trackMouse=trackMouse,options.mousePoint=trackMouse,thisToolTip)},thisToolTip.cursor=function(cursor){return"undefined"==typeof cursor?options.cursor:(options.cursor=cursor,thisToolTip)},thisToolTip.font=function(family,size){return 0==arguments.length?{family:options.fontFamily,size:options.fontSize}:(1==arguments.length&&(size="1em"),options.fontFamily=family,options.fontSize=parseSize(size),thisToolTip)},thisToolTip.foregroundColor=function(foregroundColor){return"undefined"==typeof foregroundColor?options.foregroundColor:(options.foregroundColor=foregroundColor,thisToolTip)},thisToolTip.backgroundColor=function(backgroundColor){return"undefined"==typeof backgroundColor?options.backgroundColor:(options.backgroundColor=backgroundColor,thisToolTip)},thisToolTip.backgroundOpacity=function(backgroundOpacity){return"undefined"==typeof backgroundOpacity?options.backgroundOpacity:(options.backgroundOpacity=backgroundOpacity,thisToolTip)},thisToolTip.padding=function(padding){if("undefined"==typeof padding)return options.padding;var size0,size1;switch(padding=padding.split(" ",4),padding.length){case 0:return options.padding;case 1:size0=parseSize(padding[0]),options.padding=size0+"px "+size0+"px "+size0+"px "+size0+"px";break;case 2:size0=parseSize(padding[0]),size1=parseSize(padding[1]),options.padding=size0+"px "+size1+"px "+size0+"px "+size1+"px";break;case 3:size0=parseSize(padding[1]),options.padding=parseSize(padding[0])+"px "+size0+"px "+parseSize(padding[2])+"px "+size0+"px";break;case 4:options.padding=parseSize(padding[0])+"px "+parseSize(padding[1])+"px "+parseSize(padding[2])+"px "+parseSize(padding[3])+"px"}return thisToolTip},thisToolTip.borderRadius=function(borderRadius){return"undefined"==typeof borderRadius?options.borderRadius:(options.borderRadius=parseSize(borderRadius),thisToolTip)},thisToolTip.boxShadow=function(size,color,opacity){if(0==arguments.length)return options.boxShadow;var parsedColor,parsedSize,boxShadowString;return"none"==arguments[0]?options.boxShadow="":(parsedSize=parseSize(size),parsedColor=parseColor(color),0!==opacity?(rgbCore=parsedColor.match(/\d+/g),boxShadowString="rgba("+parseInt(rgbCore[0])+","+parseInt(rgbCore[1])+","+parseInt(rgbCore[2])+","+opacity+")"):boxShadowString=parsedColor,options.boxShadow=parsedSize+"px "+parsedSize+"px "+parsedSize+"px 0 "+boxShadowString),thisToolTip},thisToolTip.transitionVisible=function(delay,duration){return 0==arguments.length?options.transitionVisible:(options.transitionVisible="opacity "+duration+"s ease-in "+delay+"s",thisToolTip)},thisToolTip.transitionHidden=function(delay,duration){return 0==arguments.length?options.transitionHidden:(options.transitionHidden="opacity "+duration+"s ease-out "+delay+"s",thisToolTip)},thisToolTip.arrowSize=function(arrowSize){return"undefined"==typeof arrowSize?options.arrowSize:(options.arrowSize=parseSize(arrowSize),thisToolTip)},thisToolTip.width=function(width,autoSize){return"undefined"==typeof width?options.width:(autoSize="undefined"!=typeof autoSize,options.width=parseSize(width),options.autoSize=autoSize,thisToolTip)},thisToolTip.minWidth=function(minWidth){return"undefined"==typeof minWidth?options.minWidth:(options.minWidth=parseSize(minWidth),thisToolTip)},thisToolTip.remove=function(){window.clearInterval(targetTimer),"undefined"!=typeof d3?targetElement.classed("foxToolTipTarget",!1).on("mouseover",null).on("mouseout",null).on("mousemove",null):(targetElement.className=targetElement.className.replace(" foxToolTipTarget",""),targetElement.removeEventListener?(targetElement.removeEventListener("mouseover",mouseOver),targetElement.removeEventListener("mouseout",mouseOut),targetElement.removeEventListener("mousemove",mouseMove)):(targetElement.onmousemove=null,targetElement.onmouseover=null,targetElement.onmouseout=null));var tipIndex=tipsIndex.indexOf(elementId);tips.splice(tipIndex,1),tipsIndex.splice(tipIndex,1),console.log(elementId+" removed"),0==tips.length?closeDown():targetTimer=window.setInterval(detectTargetRemoval,targetTimerInterval)},"undefined"!=typeof d3?targetElement=d3.select("#"+elementId).classed("foxToolTipTarget",!0).on("mouseover",mouseOver).on("mouseout",mouseOut).on("mousemove",mouseMove):(targetElement=document.getElementById(elementId),targetElement.className+=" foxToolTipTarget",targetElement.addEventListener?(targetElement.addEventListener("mouseover",mouseOver,!1),targetElement.addEventListener("mouseout",mouseOut,!1),targetElement.addEventListener("mousemove",mouseMove,!1)):(targetElement.onmouseover=mouseOver,targetElement.onmouseout=mouseOut,targetElement.onmousemove=mouseMove)),"undefined"!=typeof d3){targetElement[0].parentNode}else{targetElement.parentNode}return options.content=content,thisToolTip},foxToolTip={create:function(elementId,content){if(null!=document.getElementById(elementId)){set||setUp();var index;index=tipsIndex.indexOf(elementId),index!==-1&&tips[index].remove();var newTip=new tip(elementId,content);return tips.push(newTip),tipsIndex.push(elementId),tips[tips.length-1]}},remove:function(elementId){var index;index=tipsIndex.indexOf(elementId),index!==-1&&tips[index].remove()}},foxToolTip}();